import type { PlistDictionary, PlistMessage } from '../../../lib/types.js';
import { BaseService } from '../base-service.js';
/**
 * Interface for WebInspector message structure
 */
export interface WebInspectorMessage extends PlistDictionary {
    __selector: string;
    __argument: PlistDictionary;
}
/**
 * WebInspectorService provides an API to:
 * - Send messages to webinspectord
 * - Listen to messages from webinspectord
 * - Communicate with web views and Safari on iOS devices
 *
 * This service is used for web automation, inspection, and debugging.
 */
export declare class WebInspectorService extends BaseService {
    static readonly RSD_SERVICE_NAME = "com.apple.webinspector.shim.remote";
    private static readonly RPC_REPORT_IDENTIFIER;
    private static readonly RPC_REQUEST_APPLICATION_LAUNCH;
    private static readonly RPC_GET_CONNECTED_APPLICATIONS;
    private static readonly RPC_FORWARD_GET_LISTING;
    private static readonly RPC_FORWARD_AUTOMATION_SESSION_REQUEST;
    private static readonly RPC_FORWARD_SOCKET_SETUP;
    private static readonly RPC_FORWARD_SOCKET_DATA;
    private static readonly RPC_FORWARD_INDICATE_WEB_VIEW;
    private connection;
    private messageEmitter;
    private isReceiving;
    private readonly connectionId;
    private receivePromise;
    constructor(address: [string, number]);
    /**
     * Send a message to the WebInspector service
     * @param selector The RPC selector (e.g., '_rpc_reportIdentifier:')
     * @param args The arguments dictionary for the message
     * @returns Promise that resolves when the message is sent
     */
    sendMessage(selector: string, args?: PlistDictionary): Promise<void>;
    /**
     * Listen to messages from the WebInspector service using async generator
     * @yields PlistMessage - Messages received from the WebInspector service
     */
    listenMessage(): AsyncGenerator<PlistMessage, void, unknown>;
    /**
     * Stop listening to messages
     */
    stopListening(): void;
    /**
     * Close the connection and clean up resources
     */
    close(): Promise<void>;
    /**
     * Get the connection ID being used for this service
     * @returns The connection identifier
     */
    getConnectionId(): string;
    /**
     * Request application launch
     * @param bundleId The bundle identifier of the application to launch
     */
    requestApplicationLaunch(bundleId: string): Promise<void>;
    /**
     * Get connected applications
     */
    getConnectedApplications(): Promise<void>;
    /**
     * Forward get listing for an application
     * @param appId The application identifier
     */
    forwardGetListing(appId: string): Promise<void>;
    /**
     * Forward automation session request
     * @param sessionId The session identifier
     * @param appId The application identifier
     * @param capabilities Optional session capabilities
     */
    forwardAutomationSessionRequest(sessionId: string, appId: string, capabilities?: PlistDictionary): Promise<void>;
    /**
     * Forward socket setup for inspector connection
     * @param sessionId The session identifier
     * @param appId The application identifier
     * @param pageId The page identifier
     * @param automaticallyPause Whether to automatically pause (defaults to true)
     */
    forwardSocketSetup(sessionId: string, appId: string, pageId: number, automaticallyPause?: boolean): Promise<void>;
    /**
     * Forward socket data to a page
     * @param sessionId The session identifier
     * @param appId The application identifier
     * @param pageId The page identifier
     * @param data The data to send (will be JSON stringified)
     */
    forwardSocketData(sessionId: string, appId: string, pageId: number, data: any): Promise<void>;
    /**
     * Forward indicate web view
     * @param appId The application identifier
     * @param pageId The page identifier
     * @param enable Whether to enable indication
     */
    forwardIndicateWebView(appId: string, pageId: number, enable: boolean): Promise<void>;
    /**
     * Connect to the WebInspector service
     * @returns Promise resolving to the ServiceConnection instance
     */
    private connectToWebInspectorService;
    /**
     * Start receiving messages from the WebInspector service in the background
     */
    private startMessageReceiver;
}
export default WebInspectorService;
//# sourceMappingURL=index.d.ts.map